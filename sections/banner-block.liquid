<style>
  .two-banner-section {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    padding: 24px 20px;
    gap: 0;
  }

  .two-banner-link {
    flex: 1 1 50%;
    text-decoration: none;
    display: block;
    overflow: hidden;
  }

  .two-banner-block {
    width: 100%;
    flex: 1 1 0;
    aspect-ratio: 247/140;
    position: relative;
    overflow: hidden;
  }

  .two-banner-block img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 0.3s ease;
  }

  .two-banner-link:first-child .two-banner-block {
    border-top-left-radius: 16px;
    border-bottom-left-radius: 16px;
  }

  .two-banner-link:last-child .two-banner-block {
    border-top-right-radius: 16px;
    border-bottom-right-radius: 16px;
  }

  @media (max-width: 768px) {
    .two-banner-section {
      flex-wrap: nowrap;
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scroll-snap-type: x mandatory;
      gap: 0;
      padding: 16px;
    }

    .two-banner-link {
      flex: 0 0 50%;
      min-width: 50%;
      scroll-snap-align: start;
    }

    .two-banner-block {
      aspect-ratio: 16 / 9;
    }

    .two-banner-link:first-child .two-banner-block {
      border-top-left-radius: 16px!important;
      border-bottom-left-radius: 16px!important;
    }

    .two-banner-link:last-child .two-banner-block {
      border-top-right-radius: 16px!important;
      border-bottom-right-radius: 16px!important;
    }
  }

  /* Mobile image switch */
  .mobile-banner {
    display: none;
  }

  @media (max-width: 600px) {
    .desktop-banner {
      display: none !important;
    }
    .mobile-banner {
      display: block !important;
    }
  }
  
  @media (min-width: 320px) and (max-width: 600px) {
    .two-banner-block.mobile-banner {
      height: 150px;  
    }
    .two-banner-block.mobile-banner img {
      object-fit: cover;
    }
    .two-banner-section {
      padding: 16px !important;
    }
  }
</style>

<div class="two-banner-section">
  {% for block in section.blocks %}
    {% if block.settings.image %}
      <a href="{{ block.settings.link | default: '#' }}" class="two-banner-link">
        
        <!-- Desktop Banner - OPTIMIZED with LAZY LOADING -->
        <div class="two-banner-block desktop-banner">
          <img
            src="{{ block.settings.image | image_url: width: 800 }}"
            srcset="{{ block.settings.image | image_url: width: 400 }} 400w,
                    {{ block.settings.image | image_url: width: 800 }} 800w,
                    {{ block.settings.image | image_url: width: 1200 }} 1200w"
            sizes="(max-width: 768px) 50vw, 50vw"
            alt="{{ block.settings.image.alt | default: 'Banner' }}"
            loading="lazy"
            decoding="async"
            width="800"
            height="453"
          >
        </div>

        <!-- Mobile Banner - OPTIMIZED with LAZY LOADING (only if set) -->
        {% if block.settings.mobile_image %}
          <div class="two-banner-block mobile-banner">
            <img
              src="{{ block.settings.mobile_image | image_url: width: 600 }}"
              srcset="{{ block.settings.mobile_image | image_url: width: 300 }} 300w,
                      {{ block.settings.mobile_image | image_url: width: 600 }} 600w"
              sizes="50vw"
              alt="{{ block.settings.mobile_image.alt | default: 'Banner' }}"
              loading="lazy"
              decoding="async"
              width="600"
              height="338"
            >
          </div>
        {% endif %}
        
      </a>
    {% endif %}
  {% endfor %}
</div>

{% schema %}
{
  "name": "Two Image Banners",
  "tag": "section",
  "max_blocks": 2,
  "settings": [],
  "blocks": [
    {
      "type": "banner",
      "name": "Banner",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Banner Image (Desktop)"
        },
        {
          "type": "image_picker",
          "id": "mobile_image",
          "label": "Mobile Banner Image (Shown below 600px)"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link URL"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Two Image Banners",
      "category": "Custom",
      "blocks": [
        {
          "type": "banner"
        },
        {
          "type": "banner"
        }
      ]
    }
  ]
}
{% endschema %}