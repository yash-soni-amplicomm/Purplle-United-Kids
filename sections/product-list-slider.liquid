<style>
.slick-slider{position:relative;display:block;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-touch-callout:none;-khtml-user-select:none;-ms-touch-action:pan-y;touch-action:pan-y;-webkit-tap-highlight-color:transparent}
.slick-list{position:relative;display:block;overflow:hidden;margin:0;padding:0}
.slick-list:focus{outline:0}.slick-list.dragging{cursor:pointer;cursor:hand}
.slick-slider .slick-list,.slick-slider .slick-track{-webkit-transform:translate3d(0,0,0);-moz-transform:translate3d(0,0,0);-ms-transform:translate3d(0,0,0);-o-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}
.slick-track{position:relative;top:0;left:0;display:block;margin-left:auto;margin-right:auto}
.slick-track:after,.slick-track:before{display:table;content:''}.slick-track:after{clear:both}
.slick-loading .slick-track{visibility:hidden}.slick-slide{display:none;float:left;height:100%;min-height:1px}[dir=rtl] 
.slick-slide{float:right}.slick-slide img{display:block}.slick-slide.slick-loading img{display:none}
.slick-slide.dragging img{pointer-events:none}.slick-initialized .slick-slide{display:block}
.slick-loading .slick-slide{visibility:hidden}.slick-vertical .slick-slide{display:block;height:auto;border:1px solid transparent}
.slick-arrow.slick-hidden{display:none}
.slick-loading .slick-list{background:#fff url(ajax-loader.gif) center center no-repeat}@font-face{font-family:slick;font-weight:400;font-style:normal;src:url(fonts/slick.eot);src:url(fonts/slick.eot?#iefix) format('embedded-opentype'),url(fonts/slick.woff) format('woff'),url(fonts/slick.ttf) format('truetype'),url(fonts/slick.svg#slick) format('svg')}
.slick-next,.slick-prev{font-size:0;line-height:0;position:absolute;top:50%;display:block;width:20px;height:20px;padding:0;-webkit-transform:translate(0,-50%);-ms-transform:translate(0,-50%);transform:translate(0,-50%);cursor:pointer;color:transparent;border:none;outline:0;background:0 0}
.slick-next:focus,.slick-next:hover,.slick-prev:focus,.slick-prev:hover{color:transparent;outline:0;background:0 0}.slick-next:focus:before,.slick-next:hover:before,.slick-prev:focus:before,.slick-prev:hover:before{opacity:1}.slick-next.slick-disabled:before,.slick-prev.slick-disabled:before{opacity:.25}.slick-next:before,.slick-prev:before{font-family:slick;font-size:20px;line-height:1;opacity:.75;color:#fff;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.slick-prev{left:-25px}[dir=rtl] .slick-prev{right:-25px;left:auto}.slick-prev:before{content:'←'}[dir=rtl] .slick-prev:before{content:'→'}.slick-next{right:-25px}[dir=rtl] .slick-next{right:auto;left:-25px}.slick-next:before{content:'→'}[dir=rtl] .slick-next:before{content:'←'}.slick-dotted.slick-slider{margin-bottom:30px}.slick-dots{position:absolute;bottom:-25px;display:block;width:100%;padding:0;margin:0;list-style:none;text-align:center}.slick-dots li{position:relative;display:inline-block;width:20px;height:20px;margin:0 5px;padding:0;cursor:pointer}.slick-dots li button{font-size:0;line-height:0;display:block;width:20px;height:20px;padding:5px;cursor:pointer;color:transparent;border:0;outline:0;background:0 0}.slick-dots li button:focus,.slick-dots li button:hover{outline:0}.slick-dots li button:focus:before,.slick-dots li button:hover:before{opacity:1}
.slick-dots li button:before{font-family:slick;font-size:6px;line-height:20px;position:absolute;top:0;left:0;width:20px;height:20px;content:'•';text-align:center;opacity:.25;color:#000;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
.slick-dots li.slick-active button:before{opacity:.75;color:#000}

</style>

<script src="//code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="//code.jquery.com/ui/1.13.2/jquery-ui.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"></script>
{% stylesheet %}
/* ---------- SECTION: Tabbed Promo Slider ---------- */
.scc-ct-tabs-section { box-sizing: border-box; padding: 0rem 0rem 0.8rem 0rem; }
.scc-banner-tab-wrapper { display: flex;  align-items: flex-start; justify-content: space-between; width: 100%; }


/* Left banner (45%) */
.scc-banner-image { display: flex;
width: 511px;
justify-content: center;
align-items: flex-start; }
.scc-banner-image img { width: 100%; height: auto; border-radius: 16px; object-fit: cover; display: block; }

@media (min-width:1024px){
  .scc-banner-image{
    margin-left:20px;
  }
}

/* Right content (tabs & products) - 55% */
.scc-tab-content { flex: 1 1 65%; max-width: 65%;     display: flex; flex-direction: column; position: relative; }

/* Title */
.scc-section-title { margin: 0 0 12px; font-weight: 600; font-size: {{ section.settings.heading_size }}px; color: {{ section.settings.text_color }}; }

/* Tabs nav */
.scc-tabs-nav { display: inline-flex; padding: 8px; border-radius: 8px;
    border: 0.5px solid #5D2F91;gap: 10px; list-style: none; flex-wrap: wrap; }
.scc-tabs-nav li { list-style: none; }
.scc-tab-link {
  display: inline-block;
  padding: 6px 20px;
  border-radius: 20px;
  background: {{ section.settings.tab_background_color }};
  color: {{ section.settings.tab_text_color }};
  border: 1px solid {{ section.settings.tab_border_color }};
  font-size: 14px;
  text-decoration: none;
  transition: all .18s ease;
}
.scc-tab-link.active { background: rgb(40 41 39 / 10%);
    color: rgb(40, 41, 40);
 }

/* Panel */
.scc-tab-panel { display: none; }
.scc-tab-panel.active { display: block; right: 60px; position: relative;}

/* PRODUCT SLIDER */
.scc-ct-tabs .product-slider { position: relative; box-sizing: border-box; }
.scc-ct-tabs .product-slider .grid__item { display: block; width: auto; box-sizing: border-box; outline: none; border-radius: 16px; background: var(--Grey-0, #FAFAFA);}

.scc-ct-tabs .slick-prev,
.scc-ct-tabs .slick-next {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: #fff;
  z-index: 5;
  display: flex !important;
  align-items: center;
  justify-content: center;
}
.scc-ct-tabs .slick-prev { left: 8px; }
.scc-ct-tabs .slick-next { right: 8px; }
.scc-ct-tabs .slick-prev:before,
.scc-ct-tabs .slick-next:before { color:  #6c5959; font-size: 40px; opacity: 1; }

.slick-dotted.slick-slider { margin-bottom: 0px !important; }

.scc-ct-tabs .slick-dots { position: relative;  text-align: left;}
.scc-ct-tabs .slick-dots li button:before { font-size: 25px; color: #bbb; opacity: 1; }
.scc-ct-tabs .slick-dots li.slick-active button:before { color: #333; }
.slick-dots li {margin: 0 !important;}
.slick-dots {bottom: 0px !important; margin: auto !important; width: 50% !important;}

/* View all link */
.collection__view-all { margin-top: 10px; text-align: right; }
.collection__view-all a { color: #333; text-decoration: underline; font-size: 14px; }
@media (min-width: 1024px) { .scc-tab-panel.active { top: 30px; } .product-list-slider-custom-nav { padding-top: 25px;} }
@media (max-width: 1024px) {
  .scc-banner-tab-wrapper { flex-direction: column; gap: 20px; }
  .scc-banner-image, .scc-tab-content { max-width: 100%; flex: 1 1 100%; }
  .scc-section-title { text-align: center; }
  .scc-tabs-nav {display: flex; justify-content: center; margin:0; }
  .scc-tab-panel.active { right: 0px; position: relative;}
  .scc-ct-tabs .slick-dots { text-align: right; width: 100% !important; }
  .scc-ct-tabs .product-slider .grid__item{padding:0px !important;}
  .scc-tab-link{ padding: 6px 10px; }
  .scc-banner-tab-wrapper { justify-content: center; align-items: center; gap: 20px; }
  .product-list-slider-custom-nav { display: flex; justify-content: center; align-items: center; }

  .scc-banner-image{
    width:285px;
  }
}
.product-slider .slick-slide { width: calc((100% / 3) - 10px); }

.rounded-\[10px\] { border-radius: 20px; }
/* .x-variants-data { display: block; position: absolute; bottom: -0.5rem; } */
fieldset[data-option-name="size"] { max-height: 100px; overflow-y: auto; display: flex; flex-direction: column; }
/* .card-product { padding-bottom: 0px; margin: 20px 10px 0px 10px; } */
.product-list-slider-custom-nav{ text-align:center; }
.scc-banner-tab-wrapper{ margin-top:20px; }
{% endstylesheet %}

<div class="scc-ct-tabs-section page-width mt-4" aria-label="Tabbed promotional products">
  <div class="scc-banner-tab-wrapper">

   {% if section.settings.banner_image != blank or section.settings.banner_image_mobile != blank %}
  <div class="scc-banner-image">
    <picture>
      {% if section.settings.banner_image_mobile != blank %}
        <source media="(max-width: 749px)" srcset="{{ section.settings.banner_image_mobile | image_url: width: 750 }}">
      {% endif %}
      {% if section.settings.banner_image != blank %}
        <img src="{{ section.settings.banner_image | image_url: width: 1400 }}" alt="{{ section.settings.title | escape }}">
      {% endif %}
    </picture>
  </div>
{% endif %}

    <div class="scc-tab-content">
      {% if section.settings.title != blank %}
        <div class="flex justify-center items-center"><h2 class="scc-section-title">{{ section.settings.title }}</h2></div>
      {% endif %}

      <div id="scc-ct-tabs-{{ section.id }}" class="scc-ct-tabs">
        <!-- Tabs -->
        <div class="product-list-slider-custom-nav">
          <ul class="scc-tabs-nav" role="tablist">
            {% for block in section.blocks %}
              {% assign collection = collections[block.settings.collection] %}
              {% if collection != blank %}
                <li role="presentation">
                  <a href="#panel-{{ forloop.index }}-{{ section.id }}" data-target="#panel-{{ forloop.index }}-{{ section.id }}" class="scc-tab-link {% if forloop.first %}active{% endif %}" role="tab" aria-selected="{% if forloop.first %}true{% else %}false{% endif %}">
                    {{ block.settings.custom_tab_label | default: collection.title }}
                  </a>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        </div>

        <!-- Panels -->
        {% for block in section.blocks %}
          {% assign collection = collections[block.settings.collection] %}
          {% if collection != blank %}
            <div id="panel-{{ forloop.index }}-{{ section.id }}" class="scc-tab-panel {% if forloop.first %}active{% endif %}" role="tabpanel" aria-hidden="{% if forloop.first %}false{% else %}true{% endif %}">
              <div class="product-slider">
                {% for product in collection.products limit: section.settings.product_limit %}
                  <div class="grid__item">
                   {% render 'card-product', card_product: product %}
                  </div>
                {% endfor %}
              </div>

              {% if block.settings.viewall %}
                <div class="collection__view-all">
                  <a href="{{ collection.url }}">View All Collection →</a>
                </div>
              {% endif %}
            </div>
          {% endif %}
        {% endfor %}
      </div>
    </div>
  </div>
</div>

<script>
jQuery(function($) {
  var hasSlick = !!($.fn && $.fn.slick);
  var $section = $('#scc-ct-tabs-{{ section.id }}');

  function initSlickPanel($panel) {
    var $slider = $panel.find('.product-slider');
    if (!$slider.length || !hasSlick) return;
    if ($slider.hasClass('slick-initialized')) return;

    $slider.slick({
      dots: true,
      arrows: false,
      infinite: true,
      autoplay: true,
      autoplaySpeed: 5000,
      slidesToShow: 4,
      slidesToScroll: 1,
      centerMode: false,
      variableWidth: false,
      responsive: [
        { breakpoint: 1024, settings: { slidesToShow: 3, slidesToScroll: 1, infinite: false } },
        { breakpoint: 600,  settings: { slidesToShow: 3, slidesToScroll: 1, infinite: false } }
      ]
    });
  }

  var $firstTabPanel = $section.find('.scc-tab-panel.active');
  if ($firstTabPanel.length) initSlickPanel($firstTabPanel);

  $section.on('click', '.scc-tab-link', function(e) {
    e.preventDefault();
    var $link = $(this);
    if ($link.hasClass('active')) return;

    $section.find('.scc-tab-link').removeClass('active').attr('aria-selected', 'false');
    $link.addClass('active').attr('aria-selected', 'true');

    var target = $link.data('target');
    $section.find('.scc-tab-panel').removeClass('active').attr('aria-hidden', 'true').hide();
    var $panel = $(target);
    $panel.addClass('active').attr('aria-hidden', 'false').show();

    initSlickPanel($panel);
    if (hasSlick) $panel.find('.product-slider.slick-initialized').slick('setPosition');
  });

  $(window).on('load resize', function() {
    if (!hasSlick) return;
    $section.find('.product-slider.slick-initialized').each(function() {
      try { $(this).slick('setPosition'); } catch(e) {}
    });
  });
});
</script>

{% schema %}
{
  "name": "product list slider",
  "settings": [
    { "type": "image_picker", "id": "banner_image", "label": "Banner Image" },
    { "type": "image_picker", "id": "banner_image_mobile", "label": "Mobile Banner Image" },
    { "type": "text", "id": "title", "label": "Section Title", "default": "Explore Our Collections" },
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#ffffff" },
    { "type": "range", "id": "heading_size", "label": "Heading Font Size (px)", "min": 16, "max": 48, "step": 2, "default": 26 },
    { "type": "color", "id": "text_color", "label": "Heading Text Color", "default": "#111111" },
    { "type": "color", "id": "tab_text_color", "label": "Tab Text Color", "default": "#111111" },
    { "type": "color", "id": "tab_background_color", "label": "Tab Background Color", "default": "#f5f5f5" },
    { "type": "color", "id": "tab_border_color", "label": "Tab Border Color", "default": "#dddddd" },
    { "type": "range", "id": "product_limit", "label": "Products per Tab", "min": 3, "max": 16, "step": 1, "default": 8 },
    { "type": "select", "id": "image_ratio", "label": "Image Aspect Ratio", "default": "square", "options": [
        { "label": "Square", "value": "square" },
        { "label": "Portrait", "value": "portrait" },
        { "label": "Landscape", "value": "landscape" },
        { "label": "Adapt to image", "value": "adapt" }
      ]
    },
    { "type": "select", "id": "image_shape", "label": "Image Shape", "default": "default", "options": [
        { "label": "Default", "value": "default" },
        { "label": "Rounded", "value": "rounded" },
        { "label": "Circle", "value": "circle" }
      ]
    },
    { "type": "checkbox", "id": "show_secondary_image", "label": "Show Secondary Image", "default": true },
    { "type": "checkbox", "id": "show_vendor", "label": "Show Vendor", "default": false },
    { "type": "checkbox", "id": "show_rating", "label": "Show Rating", "default": false },
    { "type": "checkbox", "id": "show_quick_add", "label": "Enable Quick Add", "default": true }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        { "type": "collection", "id": "collection", "label": "Collection" },
        { "type": "text", "id": "custom_tab_label", "label": "Custom Tab Label" },
        { "type": "checkbox", "id": "viewall", "label": "Show View All link", "default": true }
      ]
    }
  ],
  "presets": [
    {
      "name": "Tabbed Product Slider",
      "blocks": [
        { "type": "tab" },
        { "type": "tab" }
      ]
    }
  ]
}
{% endschema %}
